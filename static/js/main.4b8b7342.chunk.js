(this["webpackJsonpvirtual-canvas"]=this["webpackJsonpvirtual-canvas"]||[]).push([[0],{267:function(e,a,t){e.exports=t.p+"static/media/folds.bc4e5cac.mp3"},277:function(e,a,t){e.exports=t.p+"static/media/lights.a713bd66.jpg"},296:function(e,a,t){e.exports=t(475)},301:function(e,a,t){},306:function(e,a,t){},308:function(e,a,t){},472:function(e,a,t){},473:function(e,a,t){},474:function(e,a,t){},475:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(23),c=t.n(l),i=(t(301),t(59)),s=t(27),o=t(38),u=t(21),m=t(25),d=t(43),p=t(44),h=t(49),v=t(47),E=t(50),g=t(522),b=t(525),f=t(512),_="http://localhost:3000",O={"Content-Type":"application/json",Accept:"application/json"},C={getUser:function(){return fetch("".concat(_,"/users/").concat(localStorage.id))},userLogin:function(e){return fetch("".concat(_,"/users/login"),{method:"POST",headers:O,body:JSON.stringify({user:e})})},userCreate:function(e){return fetch("".concat(_,"/users"),{method:"POST",headers:O,body:JSON.stringify({user:e})})}},y={bookmarkCanvas:function(e){return fetch("".concat(_,"/users/").concat(localStorage.id,"/bookmarks"),{method:"POST",headers:O,body:JSON.stringify({bookmark:{user_id:localStorage.id,picture_id:e}})})},fetchCanvas:function(e){return fetch("".concat(_,"/pictures/").concat(e))},fetchCanvases:function(){return fetch("".concat(_,"/pictures"))},newCanvas:function(e){return fetch("".concat(_,"/pictures"),{method:"POST",headers:O,body:JSON.stringify(e)})},editCanvas:function(e,a){return fetch("".concat(_,"/pictures/").concat(e),{method:"PATCH",headers:O,body:JSON.stringify(a)})},deleteCanvas:function(e){return fetch("".concat(_,"/pictures/").concat(e),{method:"DELETE",headers:O})}},j={newAnimation:function(e,a){return fetch("".concat(_,"/").concat(e,"s"),{method:"POST",headers:O,body:JSON.stringify(Object(o.a)({},"".concat(e),{user_id:localStorage.id,picture_id:a}))})}},S={editP5:function(e,a){return fetch("".concat(_,"/p5_shapes/").concat(e),{method:"PATCH",headers:O,body:JSON.stringify(a)})},deleteP5:function(e){return fetch("".concat(_,"/p5_shapes/").concat(e),{method:"DELETE",headers:O})}},k={editMojs:function(e,a){return fetch("".concat(_,"/animate_mos/").concat(e),{method:"PATCH",headers:O,body:JSON.stringify(a)})},deleteMojs:function(e){return fetch("".concat(_,"/animate_mos/").concat(e),{method:"DELETE",headers:O})}},N=t(87),B=t.n(N),T=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"readFrequencyShapes",value:function(a,t,n,r){for(var l=0;l<a.length;l++)a[l].frequency===t&&e.readJsonShape(a[l],n,r)}},{key:"readJsonShape",value:function(e,a,t){t.push(),t.fill("rgb(".concat(e.fill,")")),t.stroke("rgb(".concat(e.stroke,")"));var n=e.width,r=e.height,l=e.amount,c=e.spin,i=e.orbit,s=e.shape,o=e.stagger_radius,u=e.stagger_place,m=a+o;switch(t.rotate(i*t.frameCount/10),s){case"rect":for(var d=0;d<l;d++)t.push(),t.rotate(360/l*d+u),t.push(),t.translate(m,m),t.rotate(c*t.frameCount/10),t.rectMode(t.CENTER),t.rect(0,0,n,r),t.pop(),t.pop();break;case"ellipse":for(var p=0;p<l;p++)t.push(),t.rotate(360/l*p+u),t.push(),t.translate(m,m),t.rotate(c*t.frameCount/10),t.ellipseMode(t.CENTER),t.ellipse(0,0,n,r),t.pop(),t.pop();break;case"triangle":for(var h=0;h<l;h++){t.push(),t.rotate(360/l*h+u),t.push();var v=2*r/3;t.translate(m,m),t.rotate(c*t.frameCount/10),t.triangle(0,-v,n,r,-n,r),t.pop(),t.pop()}break;case"line":for(var E=0;E<l;E++)t.push(),t.rotate(360/l*E+u),t.push(),t.translate(m,m),t.rotate(c*t.frameCount/10),t.line(0,0,n,r),t.pop(),t.pop()}t.pop()}}]),e}(),w=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(v.a)(a).call(this,e))).sketch=function(e){var a=t.props.canvas,n=a.background,r=a.mid_mapping_1,l=a.treble_mapping_1,c=a.bass_mapping_1,i=a.p5_shapes;e.setup=function(){e.angleMode(e.DEGREES),e.createCanvas(300,150),e.background("rgb(".concat(n,")")),e.translate(e.width/2,e.height/2),T.readFrequencyShapes(i,"treble",l,e),T.readFrequencyShapes(i,"mid",r,e),T.readFrequencyShapes(i,"bass",c,e)}},t.myRef=r.a.createRef(),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){this.myP5=new B.a(this.sketch,this.myRef.current)}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.myRef})}}]),a}(r.a.Component),A=(t(306),function(e){return r.a.createElement("div",{className:"canvas-card"},r.a.createElement(w,{canvas:e.canvas}),r.a.createElement("h4",null,e.canvas.title),e.delete?r.a.createElement("button",{onClick:e.delete},"Delete"):r.a.createElement("p",null,"By: ",e.user))}),L=t(57),D=function(e){return r.a.createElement("ul",null,e.title?r.a.createElement("h3",null,e.title):"",function(){if(e.canvases&&e.canvases.length>0)return e.canvases.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(L.b,{key:e.id,to:"/canvases/".concat(e.id)},r.a.createElement(A,{canvas:e,user:e.user?e.user.name:""})))}))}())},P=(t(308),function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(v.a)(a).call(this,e))).handleNewCanvas=function(){t.props.user_id&&y.newCanvas(t.state.newCanvas).then((function(e){return e.json()})).then((function(e){t.props.handleNewCanvas(e),t.setState((function(a){return{canvases:[].concat(Object(m.a)(a.canvases),[e])}}))})).catch(console.log)},t.handleOnChange=function(e){t.setState({newCanvas:Object(u.a)({},t.state.newCanvas,Object(o.a)({},e.target.id,e.target.value))})},t.state={loading:!1,canvases:[],newCanvas:{title:"",user_id:t.props.user_id}},t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},(function(){y.fetchCanvases().then((function(e){return e.json()})).then((function(a){e.setState({canvases:a,loading:!1})}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"canvas-form"},r.a.createElement("h3",null,"Create Your Own"),this.props.user_id?r.a.createElement(g.a,{onChange:this.handleOnChange},r.a.createElement("label",null,"Name"),r.a.createElement("br",null),r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Field,null,r.a.createElement("input",{value:this.state.newCanvas.title,id:"title"})),r.a.createElement(b.a,{onClick:function(){return e.handleNewCanvas()}},"New Canvas"))):r.a.createElement("h4",null,"Must login or create a profile to create a canvas")),r.a.createElement("h3",null,"Active Canvases"),r.a.createElement("div",{id:"divider"}),r.a.createElement("div",{className:"canvas-list"},this.state.loading?r.a.createElement(f.a,null):"",r.a.createElement(D,{canvases:this.state.canvases})))}}]),a}(r.a.Component)),R=Object(s.b)((function(e){return{user_id:e.user_id}}))(P),I=function(e){return r.a.createElement("div",{className:"canvases-index"},r.a.createElement(R,{handleNewCanvas:function(a){e.history.push("/canvases/".concat(a.id))}}))},x=t(266),H=t.n(x),M=t(267),F=t.n(M),U=(t(408),{apiKey:"AIzaSyBjEbxXggiBfnzQWTQu09soV9lbRJSA_TA",authDomain:"virtual-canvas.firebaseapp.com",databaseURL:"https://virtual-canvas.firebaseio.com",projectId:"virtual-canvas",storageBucket:"virtual-canvas.appspot.com",messagingSenderId:"331574050775",appId:"1:331574050775:web:199288fb0d1e763ed81592",measurementId:"G-KHGVVPE55P"}),V=t(268),q=t.n(V),J=t(419);q.a.initializeApp(U);var z=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(v.a)(a).call(this,e))).toggleConnection=function(){t.setState({connected:!t.state.connected})},t.sketch=function(e){var a,n;e.preload=function(){t.song=e.loadSound(F.a)},e.setup=function(){e.createCanvas(600,600),t.toggleBtn=e.createButton("Play / Pause"),t.uploadBtn=e.createFileInput(e.uploaded),t.uploadBtn.addClass("upload-btn"),t.toggleBtn.addClass("toggle-btn"),t.toggleBtn.mousePressed(e.toggleAudio),t.canvasChannel=t.cable.subscriptions.create({channel:"PicturesChannel",id:t.props.paramsId},{connected:function(){console.log("connected!"),t.toggleConnection()},disconnected:function(){return t.toggleConnection()},received:function(e){"type"in e?t.props.dispatch(e):t.handleRecievedBurst(e)}}),n=new B.a.Amplitude,a=new B.a.FFT,e.angleMode(e.DEGREES)},e.newDrawing=function(a,t){e.noStroke(),e.fill(250),e.ellipse(a,t,5,5)},e.uploaded=function(a){t.uploadLoading=!0,t.uploadedAudio=e.loadSound(a.data,e.uploadedAudioPlay)},e.mouseClicked=function(){"bursts"===t.props.selected&&e.mouseX*e.mouseY>0&&e.mouseX<600&&e.mouseY<600&&t.canvasChannel.send({canvas_id:t.props.paramsId,burst:{user_id:localStorage.id,tune:{x:e.winMouseX,y:e.winMouseY}}})},e.uploadedAudioPlay=function(e){t.uploading=!1,t.song.isPlaying()&&t.song.pause(),t.song=e,t.song.play()},e.toggleAudio=function(){t.song.isPlaying()?t.song.pause():t.song.play()},e.draw=function(){var r=t.props.canvas,l=r.background,c=r.mid_mapping_1,i=r.mid_mapping_2,s=r.treble_mapping_1,o=r.treble_mapping_2,u=r.bass_mapping_1,m=r.bass_mapping_2;e.background("rgb(".concat(l,")")),e.translate(e.width/2,e.height/2),e.level=n.getLevel(),a.analyze();var d=a.getEnergy("bass"),p=a.getEnergy("treble"),h=a.getEnergy("mid"),v=e.map(h,0,255,c,i),E=e.map(p,0,255,s,o),g=e.map(d,0,255,u,m);T.readFrequencyShapes(t.props.shapes,"treble",E,e),T.readFrequencyShapes(t.props.shapes,"mid",v,e),T.readFrequencyShapes(t.props.shapes,"bass",g,e)}},t.handleRecievedBurst=function(e){var a=e.burst,n=a.user_id,r=a.tune,l=t.props.bursts;console.log(n,r);for(var c=0;c<l.length;c++)l[c].user_id==n&&l[c].burst.tune(r).replay()},t.myRef=r.a.createRef(),t.state={connected:!1},t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){this.myP5=new B.a(this.sketch,this.myRef.current),this.cable=J.createConsumer("wss://intense-harbor-90528.herokuapp.com/cable")}},{key:"componentWillUnmount",value:function(){this.cable.disconnect(),this.props.dispatch({type:"REMOVE_CANVAS"}),this.song.pause()}},{key:"render",value:function(){return r.a.createElement("div",{id:"canvas",className:"canvas",onClick:this.handleClick,ref:this.myRef})}}]),a}(r.a.Component),G=Object(s.b)((function(e){return{user_id:e.user_id,canvas:e.canvas,selected:e.selected,shapes:e.canvasShapes,bursts:e.canvasBursts?e.canvasBursts.map((function(e){return{user_id:e.user_id,burst:new H.a.Burst({parent:document.getElementById("canvas"),left:0,top:0,count:e.count,angle:{0:e.angle},radius:Object(o.a)({},e.radius_1,e.radius_2),children:{shape:e.shape,fill:e.color,radius:20,strokeWidth:e.stroke_width,duration:100*e.duration}})}})):[]}}))(z),W=t(476),X=function(e){return r.a.createElement("div",null)},Y=t(516),K=t(521),Q=t(529),Z=t(517),$=t(528),ee=t(518),ae=Object(s.b)()((function(e){Object(n.useEffect)((function(){e.animation.id!==l.id&&c(Object(u.a)({},e.animation))}));var a=Object(n.useState)(Object(u.a)({},e.animation)),t=Object(i.a)(a,2),l=t[0],c=t[1],s=function(e,a){c(Object(u.a)({},l,Object(o.a)({},e,a)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tool-burst"},r.a.createElement("div",{className:"burst1"},r.a.createElement("h3",null,"Burst"),r.a.createElement(W.a,{onClick:function(){k.deleteMojs(e.animation.id,{animate_mo:Object(u.a)({},l)}).then((function(e){return e.json()})).then((function(a){e.dispatch({type:"HTTP_EDIT_BURST",animation:a})}))}},"Save Burst"),r.a.createElement(W.a,{onClick:function(){k.deleteMojs(e.animation.id).then((function(e){return e.json()})).then((function(a){e.dispatch(a)}))}},"Delete Burst"),r.a.createElement("div",null,r.a.createElement(Y.a,null,r.a.createElement(K.a,{labelId:"shape-select",id:"shape",name:"shape",value:l.shape,onChange:function(e,a){return s("shape",e.target.value)}},r.a.createElement(Q.a,{value:"circle"},"Circle"),r.a.createElement(Q.a,{value:"rect"},"Rectangle"),r.a.createElement(Q.a,{value:"polygon"},"Polygon"),r.a.createElement(Q.a,{value:"zigzag"},"Zigzag"),r.a.createElement(Q.a,{value:"curve"},"Curve"))),r.a.createElement(Y.a,null,r.a.createElement(K.a,{labelId:"color-select",id:"color",name:"color",value:l.color,onChange:function(e,a){return s("color",e.target.value)}},r.a.createElement(Q.a,{value:"red"},"Red"),r.a.createElement(Q.a,{value:"yellow"},"Yellow"),r.a.createElement(Q.a,{value:"pink"},"Pink"),r.a.createElement(Q.a,{value:"blue"},"Blue"),r.a.createElement(Q.a,{value:"cyan"},"Cyan"),r.a.createElement(Q.a,{value:"magenta"},"Magenta")))),r.a.createElement("div",{className:"burst2"},r.a.createElement(Z.a,{id:"slider",gutterBottom:!0},"Radius 1"),r.a.createElement($.a,{name:"radius_1",orientation:"vertical",value:l.radius_1,label:"Radius 1",valueLabelDisplay:"auto",onChange:function(e,a){return s("radius_1",a)}}),r.a.createElement(Z.a,{id:"slider",gutterBottom:!0},"Radius 2"),r.a.createElement($.a,{name:"radius_2",orientation:"vertical",value:l.radius_2,label:"Radius 2",valueLabelDisplay:"auto",onChange:function(e,a){return s("radius_2",a)}}),r.a.createElement(Z.a,{id:"slider",gutterBottom:!0},"Count"),r.a.createElement($.a,{name:"count",orientation:"vertical",value:l.count,label:"Count",max:20,valueLabelDisplay:"auto",onChange:function(e,a){return s("count",a)}}),r.a.createElement(Z.a,{id:"slider",gutterBottom:!0},"Duration"),r.a.createElement($.a,{name:"duration",value:l.duration,orientation:"vertical",label:"Duration",valueLabelDisplay:"auto",onChange:function(e,a){return s("duration",a)}}),r.a.createElement(Z.a,{id:"slider",gutterBottom:!0},"Angle"),r.a.createElement($.a,{name:"angle",orientation:"vertical",value:l.angle,label:"Angle",valueLabelDisplay:"auto",onChange:function(e,a){return s("angle",a)}})))),r.a.createElement(ee.a,null))})),te=t(13),ne=Object(te.a)({root:{color:"red"},thumb:{color:"red"}})($.a),re=Object(te.a)({root:{color:"green"},thumb:{color:"green"}})($.a),le=Object(te.a)({root:{color:"blue"},thumb:{color:"blue"}})($.a),ce=Object(s.b)()((function(e){Object(n.useEffect)((function(){e.shape.id!==l.id&&c(Object(u.a)({},e.shape,{fill:Object(m.a)(e.shape.fill.split(",").map((function(e){return parseInt(e)}))),stroke:Object(m.a)(e.shape.stroke.split(",").map((function(e){return parseInt(e)})))}))}));var a=Object(n.useState)(Object(u.a)({},e.shape,{fill:Object(m.a)(e.shape.fill.split(",").map((function(e){return parseInt(e)}))),stroke:Object(m.a)(e.shape.stroke.split(",").map((function(e){return parseInt(e)})))})),t=Object(i.a)(a,2),l=t[0],c=t[1],s=function(e,a){c(Object(u.a)({},l,Object(o.a)({},e,a)))},d=function(e,a,t){c(Object(u.a)({},l,Object(o.a)({},a,[].concat(Object(m.a)(l[a].slice(0,e)),[t],Object(m.a)(l[a].slice(e+1))))))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tool-header"},r.a.createElement(W.a,{onClick:function(){S.editP5(e.shape.id,{p5_shape:Object(u.a)({},l,{stroke:l.stroke.join(","),fill:l.fill.join(",")})}).then((function(e){return e.json()})).then((function(a){e.dispatch({type:"HTTP_EDIT_SHAPE",animation:a})}))}},"Save Shape"),r.a.createElement(W.a,{onClick:function(){S.deleteP5(e.shape.id).then((function(e){return e.json()})).then((function(a){e.dispatch(a)}))}},"Delete Shape")),r.a.createElement("div",{className:"tool"},r.a.createElement("div",{className:"toolbox1"},r.a.createElement(Y.a,null,r.a.createElement(K.a,{labelId:"frequency-select",id:"frequency",name:"frequency",defaultValue:"",value:l.frequency,onChange:function(e,a){return s("frequency",e.target.value)}},r.a.createElement(Q.a,{value:"treble"},"Treble"),r.a.createElement(Q.a,{value:"mid"},"Mid"),r.a.createElement(Q.a,{value:"bass"},"Bass"))),r.a.createElement(Y.a,null,r.a.createElement(K.a,{labelId:"shape-select",id:"shape",name:"shape",defaultValue:"",value:l.shape,onChange:function(e,a){return s("shape",e.target.value)}},r.a.createElement(Q.a,{value:"rect"},"Rectangle"),r.a.createElement(Q.a,{value:"ellipse"},"Ellipse"),r.a.createElement(Q.a,{value:"triangle"},"Triangle"),r.a.createElement(Q.a,{value:"line"},"Line"))),r.a.createElement(Z.a,{id:"vertical-slider",gutterBottom:!0},"Stagger Radius"),r.a.createElement($.a,{name:"stagger_radius",label:"stagger_radius",min:-20,max:20,value:l.stagger_radius,valueLabelDisplay:"auto",onChange:function(e,a){return s("stagger_radius",a)}}),r.a.createElement(Z.a,{id:"vertical-slider",gutterBottom:!0},"Stagger Place"),r.a.createElement($.a,{name:"stagger_place",label:"stagger_place",min:-20,max:20,value:l.stagger_place,valueLabelDisplay:"auto",onChange:function(e,a){return s("stagger_place",a)}})),r.a.createElement("div",{className:"toolbox2"},r.a.createElement(Z.a,{id:"slider",gutterBottom:!0},"Fill Color"),r.a.createElement(ne,{value:l.fill[0],min:0,max:255,valueLabelDisplay:"auto",onChange:function(e,a){return d(0,"fill",a)}}),r.a.createElement(re,{value:l.fill[1],min:0,max:255,valueLabelDisplay:"auto",onChange:function(e,a){return d(1,"fill",a)}}),r.a.createElement(le,{value:l.fill[2],min:0,max:255,valueLabelDisplay:"auto",onChange:function(e,a){return d(2,"fill",a)}})),r.a.createElement("div",{className:"toolbox4"},r.a.createElement(Z.a,{id:"vertical-slider",gutterBottom:!0},"Width"),r.a.createElement($.a,{name:"width",label:"Width",min:0,max:50,orientation:"vertical",value:l.width,valueLabelDisplay:"auto",onChange:function(e,a){return s("width",a)}}),r.a.createElement(Z.a,{id:"vertical-slider",gutterBottom:!0},"Height"),r.a.createElement($.a,{name:"height",label:"height",min:0,max:50,orientation:"vertical",value:l.height,valueLabelDisplay:"auto",onChange:function(e,a){return s("height",a)}}),r.a.createElement(Z.a,{id:"vertical-slider",gutterBottom:!0},"Amount"),r.a.createElement($.a,{name:"amount",label:"Amount",min:0,max:20,orientation:"vertical",value:l.amount,valueLabelDisplay:"auto",onChange:function(e,a){return s("amount",a)}}),r.a.createElement(Z.a,{id:"vertical-slider",gutterBottom:!0},"Orbit"),r.a.createElement($.a,{name:"orbit",label:"Orbit",min:-100,orientation:"vertical",value:l.orbit,valueLabelDisplay:"auto",onChange:function(e,a){return s("orbit",a)}}),r.a.createElement(Z.a,{id:"vertical-slider",gutterBottom:!0},"Spin"),r.a.createElement($.a,{name:"spin",label:"Spin",min:-100,orientation:"vertical",value:l.spin,valueLabelDisplay:"auto",onChange:function(e,a){return s("spin",a)}})),r.a.createElement("div",{className:"toolbox3"},r.a.createElement(Z.a,{id:"slider",gutterBottom:!0},"Stroke Color"),r.a.createElement(ne,{name:"stroke",valueLabelDisplay:"auto",value:l.stroke[0],min:0,max:255,"aria-label":"Stroke",onChange:function(e,a){return d(0,"stroke",a)}}),r.a.createElement(re,{name:"stroke",label:"Stroke",valueLabelDisplay:"auto",value:l.stroke[1],min:0,max:255,onChange:function(e,a){return d(1,"stroke",a)}}),r.a.createElement(le,{name:"stroke",label:"Stroke",valueLabelDisplay:"auto",value:l.stroke[2],min:0,max:255,onChange:function(e,a){return d(2,"stroke",a)}}))),r.a.createElement(ee.a,null))})),ie=Object(te.a)({root:{color:"red"},thumb:{color:"red"}})($.a),se=Object(te.a)({root:{color:"green"},thumb:{color:"green"}})($.a),oe=Object(te.a)({root:{color:"blue"},thumb:{color:"blue"}})($.a),ue=Object(s.b)((function(e){return{canvas:e.canvas}}))((function(e){var a=Object(n.useState)(Object(m.a)(e.canvas.background.split(",").map((function(e){return parseInt(e)})))),t=Object(i.a)(a,2),l=t[0],c=t[1],s=Object(n.useState)([e.canvas.bass_mapping_1,e.canvas.bass_mapping_2]),o=Object(i.a)(s,2),u=o[0],d=o[1],p=Object(n.useState)([e.canvas.mid_mapping_1,e.canvas.mid_mapping_2]),h=Object(i.a)(p,2),v=h[0],E=h[1],g=Object(n.useState)([e.canvas.treble_mapping_1,e.canvas.treble_mapping_2]),b=Object(i.a)(g,2),f=b[0],_=b[1],O=function(e,a){c([].concat(Object(m.a)(l.slice(0,e)),[a],Object(m.a)(l.slice(e+1))))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"canvas-settings"},r.a.createElement(W.a,{onClick:function(){y.editCanvas(e.canvas.id,{picture:{background:l.join(","),bass_mapping_1:u[0],bass_mapping_2:u[1],mid_mapping_1:v[0],mid_mapping_2:v[1],treble_mapping_1:f[0],treble_mapping_2:f[1]}}).then((function(e){return e.json()})).then((function(e){}))}},"Save Canvas"),r.a.createElement("h3",null,"Background Color"),r.a.createElement(ie,{value:l[0],min:0,max:255,lable:"Red",valueLabelDisplay:"auto",onChange:function(e,a){return O(0,a)}}),r.a.createElement(se,{value:l[1],min:0,max:255,valueLabelDisplay:"auto",label:"Green",onChange:function(e,a){return O(1,a)}}),r.a.createElement(oe,{value:l[2],min:0,max:255,valueLabelDisplay:"auto",label:"Blue",onChange:function(e,a){return O(2,a)}})),r.a.createElement("div",{className:"canvas-settings"},r.a.createElement("h3",null,"Frequencies "),r.a.createElement(Z.a,{id:"vertical-slider",gutterBottom:!0},"Bass Mapping"),r.a.createElement($.a,{name:"bass",value:u,max:300,label:"bass",valueLabelDisplay:"auto",onChange:function(e,a){return d(a)}}),r.a.createElement(Z.a,{id:"vertical-slider",gutterBottom:!0},"Mid Mapping"),r.a.createElement($.a,{name:"mid",value:v,label:"mid",max:300,valueLabelDisplay:"auto",onChange:function(e,a){return E(a)}}),r.a.createElement(Z.a,{id:"vertical-slider",gutterBottom:!0},"Treble Mapping"),r.a.createElement($.a,{name:"treble",value:f,label:"treble",max:300,valueLabelDisplay:"auto",onChange:function(e,a){return _(a)}})),r.a.createElement(ee.a,null))})),me=Object(s.b)((function(e){return{user_id:e.user_id,canvas_id:e.canvas.id,myBursts:e.myBursts,myShapes:e.myShapes,selected:e.selected}}))((function(e){var a=function(a){j.newAnimation(a,e.canvas_id).then((function(e){return e.json()})).then((function(t){"animate_mo"==a?e.dispatch({type:"HTTP_NEW_BURST",animation:t}):e.dispatch({type:"HTTP_NEW_SHAPE",animation:t})}))};return r.a.createElement(r.a.Fragment,null,function(){switch(e.selected){case"shapes":return r.a.createElement("div",{className:"tools-container"},r.a.createElement(W.a,{onClick:function(){return a("p5_shape")}},"Create New Shape"),e.myShapes?e.myShapes.map((function(e){return r.a.createElement(ce,{shape:e})})):null);case"bursts":return r.a.createElement("div",{className:"tools-container"},r.a.createElement(W.a,{onClick:function(){return a("animate_mo")}},"Create New Burst"),e.myBursts?e.myBursts.map((function(e){return r.a.createElement(ae,{animation:e})})):null);case"paint":return r.a.createElement(X,null);case"settings":return r.a.createElement("div",{className:"tools-container"},r.a.createElement(ue,null));default:return r.a.createElement(r.a.Fragment,null)}}())})),de=Object(s.b)((function(e){return{canvas:e.canvas,admin:e.admin}}))((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"canvas-container",className:"canvas-container"},r.a.createElement(G,{paramsId:e.paramsId}),r.a.createElement(me,null)))})),pe=t(519),he=function(e){function a(){var e,t;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(v.a)(a)).call.apply(e,[this].concat(r)))).handleSaveCanvas=function(){y.bookmarkCanvas(t.props.canvas.id)},t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.fetchCanvas(this.props.match.params.id).then((function(e){return e.json()})).then((function(a){e.props.dispatch({type:"LOAD_CANVAS",canvas:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"canvas-show"},r.a.createElement("div",{className:"canvas-header"},r.a.createElement("h2",null,this.props.canvas.title),this.props.user_id?r.a.createElement(pe.a,null,r.a.createElement(W.a,{onClick:function(){return e.props.dispatch({type:"SELECT_ANIMATION",animation:"shapes"})}},"Shapes"),r.a.createElement(W.a,{onClick:function(){return e.props.dispatch({type:"SELECT_ANIMATION",animation:"bursts"})}},"Bursts"),this.props.user_id==this.props.admin?r.a.createElement(W.a,{onClick:function(){return e.props.dispatch({type:"SELECT_ANIMATION",animation:"settings"})}},"Settings"):""):""),r.a.createElement(de,{paramsId:this.props.match.params.id}))}}]),a}(r.a.Component),ve=Object(s.b)((function(e){return{user_id:e.user_id,canvas:e.canvas,admin:e.admin}}))(he),Ee=t(78),ge=t(523),be=t(106),fe=t(520),_e=t(526),Oe=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(v.a)(a).call(this,e))).handleOnSignupChange=function(e){e.persist(),t.setState((function(a){return{signup:Object(u.a)({},a.signup,Object(o.a)({},e.target.id,e.target.value))}}))},t.handleOnLoginChange=function(e){t.setState({login:Object(u.a)({},t.state.login,Object(o.a)({},e.target.id,e.target.value))})},t.handleLoginClick=function(){C.userLogin(t.state.login).then((function(e){return e.json()})).then(t.loginCallBack)},t.handleSignupClick=function(){C.userCreate(t.state.signup).then((function(e){return e.json()})).then(t.loginCallBack)},t.loginCallBack=function(e){e.error?t.setState({message:e.error}):(t.props.toggleModal(),localStorage.setItem("id",e.id),t.props.dispatch({type:"LOGIN",user_id:e.id}))},t.state={login:{email:"",password:""},signup:{email:"",name:"",password:""},message:""},t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(ge.a,{open:this.props.modal,closeOnDimmerClick:!0,onClose:this.props.toggleModal,size:"small"},r.a.createElement(ge.a.Header,null,r.a.createElement(be.a,{name:"times",onClick:this.props.toggleModal}),"Log in/Sign up"),r.a.createElement(ge.a.Content,{image:!0},r.a.createElement(ge.a.Description,null,r.a.createElement("h4",{style:{color:"red"}},this.state.message),r.a.createElement(g.a,{onChange:this.handleOnLoginChange,key:"login"},r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{placeholder:"Email",id:"email"})),r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",placeholder:"Password",id:"password"})),r.a.createElement(g.a.Button,{onClick:this.handleLoginClick,className:"login",fluid:!0,color:"green"},"Login")),r.a.createElement(fe.a,{horizontal:!0},"Or"),r.a.createElement(_e.a,null,"Sign Up"),r.a.createElement(g.a,{onChange:this.handleOnSignupChange,key:"signup"},r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{placeholder:"Name",id:"name"})),r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{placeholder:"Email",id:"email"})),r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",placeholder:"Password",id:"password"})),r.a.createElement(g.a.Button,{className:"login",onClick:this.handleSignupClick,fluid:!0,color:"yellow"},"Sign Up")))))}}]),a}(r.a.Component),Ce=Object(s.b)()(Oe),ye=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"banner-img"},r.a.createElement("div",{className:"banner-text"},r.a.createElement("h1",null,"Virtual Canvas"))))},je=t(277),Se=t.n(je),ke=function(){return r.a.createElement("div",{className:"about-container"},r.a.createElement("div",{className:"about-card"},r.a.createElement("img",{className:"left",src:Se.a,alt:"lights"}),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"text"},r.a.createElement("h2",null,"SHARED CANVASES ",r.a.createElement("br",null),r.a.createElement("span",null,"FOR AUDIO VISUALIZATION")),r.a.createElement("p",null,"Virtual Canvas is an app that lets you and any of your friends jump on the same canvas to create a visualizer together. Shapes, bursts, and canvas settings all render in real time across your screen and anyone else who wants to join. Using the same technology as instant messaging, users create, update, and delete visualizer shapes in a live and creative shared space.")),r.a.createElement("div",{className:"links"},r.a.createElement("button",null,r.a.createElement(L.b,{exact:!0,to:"/canvases"},r.a.createElement("b",null,"GET STARTED")))))))},Ne=(t(472),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Created Canvases"),r.a.createElement("div",{className:"canvas-table"},r.a.createElement("ul",null,e.canvases.map((function(a){return r.a.createElement("li",null,r.a.createElement(A,{canvas:a,delete:function(){return t=a.id,void y.deleteCanvas(t).then((function(e){return e.json()})).then((function(a){e.handleRemoveCanvas(t)}));var t}}))})))))}),Be=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(v.a)(a).call(this,e))).handleRemoveCanvas=function(e){console.log(e),t.setState({user:Object(u.a)({},t.state.user,{pictures:t.state.user.pictures.filter((function(a){return a.id!==e}))})})},t.state={user:{},selected:"canvases"},t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.getUser().then((function(e){return e.json()})).then((function(a){e.setState({user:a})}))}},{key:"render",value:function(){var e=this.state.user,a=e.name,t=e.email,n=(e.bookmarks,e.pictures);return r.a.createElement("div",{className:"user-show"},r.a.createElement("h2",null,"Account overview"),r.a.createElement("h4",null,"Email: ",t),r.a.createElement("h4",null,"Name: ",a),r.a.createElement("div",{className:"user-canvases-container"},n?r.a.createElement(Ne,{handleRemoveCanvas:this.handleRemoveCanvas,title:"Created Canvases",canvases:n,deletePath:"".concat("https://intense-harbor-90528.herokuapp.com","/pictures/")}):""))}}]),a}(r.a.Component),Te=(t(473),Object(s.b)((function(e){return{user_id:e.user_id}}))((function(e){var a=function(){localStorage.clear(),e.dispatch({type:"LOGOUT"})};return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",{className:"nav-links"},r.a.createElement("li",null,r.a.createElement(L.c,{exact:!0,to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(L.c,{exact:!0,to:"/canvases"},"Canvases")),r.a.createElement("li",null,"|"),e.user_id?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(L.c,{exact:!0,to:"/"},r.a.createElement("button",{onClick:a},"Log out"))),r.a.createElement("li",null,r.a.createElement(L.c,{exact:!0,to:"/user"},"Profile"))):r.a.createElement("button",{onClick:function(){return e.toggleModal()}},"Log in"))))}))),we=(t(474),Object(s.b)((function(e){return{user_id:e.user_id}}))((function(e){var a=Object(n.useState)(!1),t=Object(i.a)(a,2),l=t[0],c=t[1],s=function(){return c(!l)};return r.a.createElement(L.a,null,r.a.createElement(Ce,{modal:l,toggleModal:s}),r.a.createElement(Te,{toggleModal:s}),r.a.createElement(Ee.b,{exact:!0,path:"/",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,null),r.a.createElement(ke,null))}}),r.a.createElement(Ee.b,{path:"/user"},e.user_id?r.a.createElement(Be,null):r.a.createElement(Ee.a,{to:"/"})),r.a.createElement(Ee.b,{exact:!0,path:"/canvases",render:function(e){return r.a.createElement(I,e)}}),r.a.createElement(Ee.b,{exact:!0,path:"/canvases/:id",render:function(e){return r.a.createElement(ve,e)}}))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ae=t(140),Le={user_id:localStorage.id,canvas:{},canvasBursts:[],myBursts:[],canvasShapes:[],myShapes:[],selected:"",admin:""};var De=Object(Ae.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN":return Object(u.a)({},e,{user_id:a.user_id,myBursts:e.canvasBursts.filter((function(e){return e.user_id==localStorage.id})),myShapes:e.canvasShapes.filter((function(e){return e.user_id==localStorage.id}))});case"LOGOUT":return Object(u.a)({},e,{user_id:!1,myBursts:[],myShapes:[]});case"LOAD_CANVAS":return Object(u.a)({},e,{canvas:a.canvas,canvasBursts:a.canvas.animate_mos,canvasShapes:a.canvas.p5_shapes,myBursts:a.canvas.animate_mos.filter((function(e){return e.user_id==localStorage.id})),myShapes:a.canvas.p5_shapes.filter((function(e){return e.user_id==localStorage.id})),admin:a.canvas.user.id});case"PATCH_CANVAS":return Object(u.a)({},e,{canvas:a.canvas.picture});case"HTTP_NEW_BURST":return Object(u.a)({},e,{myBursts:[].concat(Object(m.a)(e.myBursts),[a.animation])});case"HTTP_EDIT_BURST":var t=e.myBursts.map((function(e){return e.id===a.animation.id?a.animation:e}));return Object(u.a)({},e,{myBursts:Object(m.a)(t)});case"HTTP_DELETE_BURST":return Object(u.a)({},e,{myBursts:e.myBursts.filter((function(e){return e.id!==a.animation_id}))});case"HTTP_NEW_SHAPE":return Object(u.a)({},e,{myShapes:[].concat(Object(m.a)(e.myShapes),[a.animation])});case"HTTP_EDIT_SHAPE":var n=e.myShapes.map((function(e){return e.id===a.animation.id?a.animation:e}));return Object(u.a)({},e,{myShapes:Object(m.a)(n)});case"HTTP_DELETE_SHAPE":return Object(u.a)({},e,{myShapes:Object(m.a)(e.myShapes.filter((function(e){return e.id!==a.animation_id})))});case"CHANNEL_POST_SHAPE":return Object(u.a)({},e,{canvasShapes:[].concat(Object(m.a)(e.canvasShapes),[a.animation.p5_shape])});case"CHANNEL_PATCH_SHAPE":var r=e.canvasShapes.map((function(e){return e.id===a.animation.p5_shape.id?a.animation.p5_shape:e}));return Object(u.a)({},e,{canvasShapes:Object(m.a)(r)});case"CHANNEL_DELETE_SHAPE":return Object(u.a)({},e,{canvasShapes:Object(m.a)(e.canvasShapes.filter((function(e){return e.id!==a.animation_id})))});case"CHANNEL_POST_BURST":return Object(u.a)({},e,{canvasBursts:[].concat(Object(m.a)(e.canvasBursts),[a.animation.animate_mo])});case"CHANNEL_PATCH_BURST":var l=e.canvasBursts.map((function(e){return e.id===a.animation.animate_mo.id?a.animation.animate_mo:e}));return Object(u.a)({},e,{canvasBursts:Object(m.a)(l)});case"CHANNEL_DELETE_BURST":return Object(u.a)({},e,{canvasBursts:Object(m.a)(e.canvasBursts.filter((function(e){return e.id!==a.animation_id})))});case"SELECT_ANIMATION":return Object(u.a)({},e,{selected:a.animation});case"REMOVE_CANVAS":return Object(u.a)({},e,{canvas:{},myAnimations:[],canvasAnimations:[],selected:"",admin:""});default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(s.a,{store:De},r.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[296,1,2]]]);
//# sourceMappingURL=main.4b8b7342.chunk.js.map