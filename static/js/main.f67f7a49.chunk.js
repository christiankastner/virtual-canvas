(this["webpackJsonpvirtual-canvas"]=this["webpackJsonpvirtual-canvas"]||[]).push([[0],{261:function(e,a,t){e.exports=t.p+"static/media/folds.bc4e5cac.mp3"},273:function(e,a,t){e.exports=t.p+"static/media/lights.a713bd66.jpg"},293:function(e,a,t){e.exports=t(458)},298:function(e,a,t){},457:function(e,a,t){},458:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(21),c=t.n(l),i=(t(298),t(40)),o=t(41),s=t(45),u=t(43),m=t(46),d=t(31),p=t(38),h=t(20),g=t(22),v=t(508),E=t(511),b="https://intense-harbor-90528.herokuapp.com",f={"Content-Type":"application/json",Accept:"application/json"},O=t(496),_=t(499),S=t(501),C=t(502),j=Object(O.a)({card:{width:200,margin:10},title:{fontSize:14},pos:{marginBottom:12}}),y=function(e){var a=j();return r.a.createElement(_.a,{className:a.card},r.a.createElement(S.a,{className:a.title},r.a.createElement(C.a,{className:a.title,color:"textSecondary",gutterBottom:!0},e.user),r.a.createElement(C.a,{variant:"h5",component:"h2"},e.canvas.title)))},k=t(48),N=function(e){return r.a.createElement("ul",null,e.title?r.a.createElement("h3",null,e.title):"",function(){if(e.canvases&&e.canvases.length>0)return e.canvases.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(k.b,{key:e.id,to:"/canvases/".concat(e.id)},r.a.createElement(y,{canvas:e,user:e.user?e.user.name:""})))}))}())},B=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).handleNewCanvas=function(){localStorage.id&&fetch("".concat(b,"/pictures"),{method:"POST",headers:f,body:JSON.stringify({picture:t.state.newCanvas})}).then((function(e){return e.json()})).then((function(e){console.log(e),t.setState((function(a){return{canvases:[].concat(Object(g.a)(a.canvases),[e])}}))}))},t.handleOnChange=function(e){t.setState({newCanvas:Object(h.a)({},t.state.newCanvas,Object(p.a)({},e.target.id,e.target.value))})},t.state={canvases:[],newCanvas:{title:"",user_id:localStorage.id}},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b,"/pictures")).then((function(e){return e.json()})).then((function(a){e.setState({canvases:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"canvas-list"},r.a.createElement("h3",null,"Active Canvases"),r.a.createElement(N,{canvases:this.state.canvases})),r.a.createElement("div",{className:"canvas-form"},r.a.createElement("h2",null,"Create Your Own"),localStorage.id?r.a.createElement(v.a,{onChange:this.handleOnChange},r.a.createElement("label",null,"Name"),r.a.createElement("br",null),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Field,null,r.a.createElement("input",{value:this.state.newCanvas.title,id:"title"})),r.a.createElement(E.a,{onClick:function(){return e.handleNewCanvas()}},"New Canvas"))):""))}}]),a}(r.a.Component),T=function(e){return r.a.createElement("div",{className:"canvases-index"},r.a.createElement(B,null))},A=t(260),L=t.n(A),D=t(261),w=t.n(D),P=t(109),x=t.n(P),I=(t(403),function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"readFrequencyShapes",value:function(a,t,n,r){for(var l=0;l<a.length;l++)a[l].frequency===t&&e.readJsonShape(a[l],n,r)}},{key:"readJsonShape",value:function(e,a,t){t.push(),t.fill("rgb(".concat(e.fill,")")),t.stroke("rgb(".concat(e.stroke,")"));var n=e.width,r=e.height,l=e.amount,c=e.spin,i=e.orbit,o=e.shape,s=e.stagger_radius,u=e.stagger_place,m=a+s;switch(t.rotate(i*t.frameCount/10),o){case"rect":for(var d=0;d<l;d++)t.push(),t.rotate(360/l*d+u),t.push(),t.translate(m,m),t.rotate(c*t.frameCount/10),t.rectMode(t.CENTER),t.rect(0,0,n,r),t.pop(),t.pop();break;case"ellipse":for(var p=0;p<l;p++)t.push(),t.rotate(360/l*p+u),t.push(),t.translate(m,m),t.rotate(c*t.frameCount/10),t.ellipseMode(t.CENTER),t.ellipse(0,0,n,r),t.pop(),t.pop();break;case"triangle":for(var h=0;h<l;h++){t.push(),t.rotate(360/l*h+u),t.push();var g=2*r/3;t.translate(m,m),t.rotate(c*t.frameCount/10),t.triangle(0,-g,n,r,-n,r),t.pop(),t.pop()}break;case"line":for(var v=0;v<l;v++)t.push(),t.rotate(360/l*v+u),t.push(),t.translate(m,m),t.rotate(c*t.frameCount/10),t.line(0,0,n,r),t.pop(),t.pop()}t.pop()}}]),e}()),H=t(404),R=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).toggleConnection=function(){t.setState({connected:!t.state.connected})},t.sketch=function(e){var a,n;e.preload=function(){t.song=e.loadSound(w.a)},e.setup=function(){e.createCanvas(600,600),t.toggleBtn=e.createButton("Play / Pause"),t.uploadBtn=e.createFileInput(e.uploaded),t.uploadBtn.addClass("upload-btn"),t.toggleBtn.addClass("toggle-btn"),t.toggleBtn.mousePressed(e.toggleAudio),t.canvasChannel=t.cable.subscriptions.create({channel:"PicturesChannel",id:t.props.paramsId},{connected:function(){console.log("connected!"),t.toggleConnection()},disconnected:function(){return t.toggleConnection()},received:function(e){"type"in e?t.props.dispatch(e):t.handleRecievedBurst(e)}}),n=new x.a.Amplitude,a=new x.a.FFT,e.angleMode(e.DEGREES)},e.newDrawing=function(a,t){e.noStroke(),e.fill(250),e.ellipse(a,t,5,5)},e.uploaded=function(a){t.uploadLoading=!0,t.uploadedAudio=e.loadSound(a.data,e.uploadedAudioPlay)},e.mouseClicked=function(){"bursts"===t.props.selected&&e.mouseX*e.mouseY>0&&e.mouseX<600&&e.mouseY<600&&t.canvasChannel.send({canvas_id:t.props.paramsId,burst:{user_id:localStorage.id,tune:{x:e.winMouseX,y:e.winMouseY}}})},e.uploadedAudioPlay=function(e){t.uploading=!1,t.song.isPlaying()&&t.song.pause(),t.song=e,t.song.play()},e.toggleAudio=function(){t.song.isPlaying()?t.song.pause():t.song.play()},e.draw=function(){var r=t.props.canvas,l=r.background,c=r.mid_mapping_1,i=r.mid_mapping_2,o=r.treble_mapping_1,s=r.treble_mapping_2,u=r.bass_mapping_1,m=r.bass_mapping_2;e.background("rgb(".concat(l,")")),e.translate(e.width/2,e.height/2),e.level=n.getLevel(),a.analyze();var d=a.getEnergy("bass"),p=a.getEnergy("treble"),h=a.getEnergy("mid"),g=e.map(h,0,255,c,i),v=e.map(p,0,255,o,s),E=e.map(d,0,255,u,m);I.readFrequencyShapes(t.props.shapes,"treble",v,e),I.readFrequencyShapes(t.props.shapes,"mid",g,e),I.readFrequencyShapes(t.props.shapes,"bass",E,e)}},t.handleRecievedBurst=function(e){var a=e.burst,n=a.user_id,r=a.tune,l=t.props.bursts;console.log(n,r);for(var c=0;c<l.length;c++)l[c].user_id==n&&l[c].burst.tune(r).replay()},t.myRef=r.a.createRef(),t.state={connected:!1},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.myP5=new x.a(this.sketch,this.myRef.current),this.cable=H.createConsumer("wss://intense-harbor-90528.herokuapp.com/cable")}},{key:"componentWillUnmount",value:function(){this.cable.disconnect(),this.props.dispatch({type:"REMOVE_CANVAS"}),this.song.pause()}},{key:"render",value:function(){return r.a.createElement("div",{id:"canvas",className:"canvas",onClick:this.handleClick,ref:this.myRef})}}]),a}(r.a.Component),M=Object(d.b)((function(e){return{canvas:e.canvas,selected:e.selected,shapes:e.canvasShapes,bursts:e.canvasBursts?e.canvasBursts.map((function(e){return{user_id:e.user_id,burst:new L.a.Burst({parent:document.getElementById("canvas"),left:0,top:0,count:e.count,angle:{0:e.angle},radius:Object(p.a)({},e.radius_1,e.radius_2),children:{shape:e.shape,fill:e.color,radius:20,strokeWidth:e.stroke_width,duration:100*e.duration}})}})):[]}}))(R),F=t(460),U=function(e){return r.a.createElement("div",null)},V=t(54),q=t(503),J=t(507),W=t(515),z=t(514),X=t(504),G=Object(d.b)()((function(e){Object(n.useEffect)((function(){e.animation.id!==l.id&&c(Object(h.a)({},e.animation))}));var a=Object(n.useState)(Object(h.a)({},e.animation)),t=Object(V.a)(a,2),l=t[0],c=t[1],i=function(e,a){console.log(e,a),c(Object(h.a)({},l,Object(p.a)({},e,a)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tool-burst"},r.a.createElement("div",{className:"burst1"},r.a.createElement("h3",null,"Burst"),r.a.createElement(F.a,{onClick:function(){fetch("".concat(b,"/animate_mos/").concat(e.animation.id),{method:"PATCH",headers:f,body:JSON.stringify({animate_mo:Object(h.a)({},l)})}).then((function(e){return e.json()})).then((function(a){e.dispatch({type:"HTTP_EDIT_BURST",animation:a})}))}},"Save Burst"),r.a.createElement(F.a,{onClick:function(){fetch("".concat(b,"/animate_mos/").concat(e.animation.id),{method:"DELETE",headers:f}).then((function(e){return e.json()})).then((function(a){e.dispatch(a)}))}},"Delete Burst"),r.a.createElement("div",null,r.a.createElement(q.a,null,r.a.createElement(J.a,{labelId:"shape-select",id:"shape",name:"shape",value:l.shape,onChange:function(e,a){return i("shape",e.target.value)}},r.a.createElement(W.a,{value:"circle"},"Circle"),r.a.createElement(W.a,{value:"rect"},"Rectangle"),r.a.createElement(W.a,{value:"polygon"},"Polygon"),r.a.createElement(W.a,{value:"zigzag"},"Zigzag"),r.a.createElement(W.a,{value:"curve"},"Curve"))),r.a.createElement(q.a,null,r.a.createElement(J.a,{labelId:"color-select",id:"color",name:"color",value:l.color,onChange:function(e,a){return i("color",e.target.value)}},r.a.createElement(W.a,{value:"red"},"Red"),r.a.createElement(W.a,{value:"yellow"},"Yellow"),r.a.createElement(W.a,{value:"pink"},"Pink"),r.a.createElement(W.a,{value:"blue"},"Blue"),r.a.createElement(W.a,{value:"cyan"},"Cyan"),r.a.createElement(W.a,{value:"magenta"},"Magenta")))),r.a.createElement("div",{className:"burst2"},r.a.createElement(C.a,{id:"slider",gutterBottom:!0},"Radius 1"),r.a.createElement(z.a,{name:"radius_1",orientation:"vertical",value:l.radius_1,label:"Radius 1",valueLabelDisplay:"auto",onChange:function(e,a){return i("radius_1",a)}}),r.a.createElement(C.a,{id:"slider",gutterBottom:!0},"Radius 2"),r.a.createElement(z.a,{name:"radius_2",orientation:"vertical",value:l.radius_2,label:"Radius 2",valueLabelDisplay:"auto",onChange:function(e,a){return i("radius_2",a)}}),r.a.createElement(C.a,{id:"slider",gutterBottom:!0},"Count"),r.a.createElement(z.a,{name:"count",orientation:"vertical",value:l.count,label:"Count",max:20,valueLabelDisplay:"auto",onChange:function(e,a){return i("count",a)}}),r.a.createElement(C.a,{id:"slider",gutterBottom:!0},"Duration"),r.a.createElement(z.a,{name:"duration",value:l.duration,orientation:"vertical",label:"Duration",valueLabelDisplay:"auto",onChange:function(e,a){return i("duration",a)}}),r.a.createElement(C.a,{id:"slider",gutterBottom:!0},"Angle"),r.a.createElement(z.a,{name:"angle",orientation:"vertical",value:l.angle,label:"Angle",valueLabelDisplay:"auto",onChange:function(e,a){return i("angle",a)}})))),r.a.createElement(X.a,null))})),Y=t(11),Z=Object(Y.a)({root:{color:"red"},thumb:{color:"red"}})(z.a),$=Object(Y.a)({root:{color:"green"},thumb:{color:"green"}})(z.a),K=Object(Y.a)({root:{color:"blue"},thumb:{color:"blue"}})(z.a),Q=Object(d.b)()((function(e){Object(n.useEffect)((function(){e.shape.id!==l.id&&c(Object(h.a)({},e.shape,{fill:Object(g.a)(e.shape.fill.split(",").map((function(e){return parseInt(e)}))),stroke:Object(g.a)(e.shape.stroke.split(",").map((function(e){return parseInt(e)})))}))}));var a=Object(n.useState)(Object(h.a)({},e.shape,{fill:Object(g.a)(e.shape.fill.split(",").map((function(e){return parseInt(e)}))),stroke:Object(g.a)(e.shape.stroke.split(",").map((function(e){return parseInt(e)})))})),t=Object(V.a)(a,2),l=t[0],c=t[1],i=function(e,a){c(Object(h.a)({},l,Object(p.a)({},e,a)))},o=function(e,a,t){c(Object(h.a)({},l,Object(p.a)({},a,[].concat(Object(g.a)(l[a].slice(0,e)),[t],Object(g.a)(l[a].slice(e+1))))))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tool-header"},r.a.createElement(F.a,{onClick:function(){fetch("".concat(b,"/p5_shapes/").concat(e.shape.id),{method:"PATCH",headers:f,body:JSON.stringify({p5_shape:Object(h.a)({},l,{stroke:l.stroke.join(","),fill:l.fill.join(",")})})}).then((function(e){return e.json()})).then((function(a){e.dispatch({type:"HTTP_EDIT_SHAPE",animation:a})}))}},"Save Shape"),r.a.createElement(F.a,{onClick:function(){fetch("".concat(b,"/p5_shapes/").concat(e.shape.id),{method:"DELETE",headers:f}).then((function(e){return e.json()})).then((function(a){e.dispatch(a)}))}},"Delete Shape")),r.a.createElement("div",{className:"tool"},r.a.createElement("div",{className:"toolbox1"},r.a.createElement(q.a,null,r.a.createElement(J.a,{labelId:"frequency-select",id:"frequency",name:"frequency",defaultValue:"",value:l.frequency,onChange:function(e,a){return i("frequency",e.target.value)}},r.a.createElement(W.a,{value:"treble"},"Treble"),r.a.createElement(W.a,{value:"mid"},"Mid"),r.a.createElement(W.a,{value:"bass"},"Bass"))),r.a.createElement(q.a,null,r.a.createElement(J.a,{labelId:"shape-select",id:"shape",name:"shape",defaultValue:"",value:l.shape,onChange:function(e,a){return i("shape",e.target.value)}},r.a.createElement(W.a,{value:"rect"},"Rectangle"),r.a.createElement(W.a,{value:"ellipse"},"Ellipse"),r.a.createElement(W.a,{value:"triangle"},"Triangle"),r.a.createElement(W.a,{value:"line"},"Line"))),r.a.createElement(C.a,{id:"vertical-slider",gutterBottom:!0},"Stagger Radius"),r.a.createElement(z.a,{name:"stagger_radius",label:"stagger_radius",min:-20,max:20,value:l.stagger_radius,valueLabelDisplay:"auto",onChange:function(e,a){return i("stagger_radius",a)}}),r.a.createElement(C.a,{id:"vertical-slider",gutterBottom:!0},"Stagger Place"),r.a.createElement(z.a,{name:"stagger_place",label:"stagger_place",min:-20,max:20,value:l.stagger_place,valueLabelDisplay:"auto",onChange:function(e,a){return i("stagger_place",a)}})),r.a.createElement("div",{className:"toolbox2"},r.a.createElement(C.a,{id:"slider",gutterBottom:!0},"Fill Color"),r.a.createElement(Z,{value:l.fill[0],min:0,max:255,valueLabelDisplay:"auto",onChange:function(e,a){return o(0,"fill",a)}}),r.a.createElement($,{value:l.fill[1],min:0,max:255,valueLabelDisplay:"auto",onChange:function(e,a){return o(1,"fill",a)}}),r.a.createElement(K,{value:l.fill[2],min:0,max:255,valueLabelDisplay:"auto",onChange:function(e,a){return o(2,"fill",a)}})),r.a.createElement("div",{className:"toolbox4"},r.a.createElement(C.a,{id:"vertical-slider",gutterBottom:!0},"Width"),r.a.createElement(z.a,{name:"width",label:"Width",min:0,max:50,orientation:"vertical",value:l.width,valueLabelDisplay:"auto",onChange:function(e,a){return i("width",a)}}),r.a.createElement(C.a,{id:"vertical-slider",gutterBottom:!0},"Height"),r.a.createElement(z.a,{name:"height",label:"height",min:0,max:50,orientation:"vertical",value:l.height,valueLabelDisplay:"auto",onChange:function(e,a){return i("height",a)}}),r.a.createElement(C.a,{id:"vertical-slider",gutterBottom:!0},"Amount"),r.a.createElement(z.a,{name:"amount",label:"Amount",min:0,max:20,orientation:"vertical",value:l.amount,valueLabelDisplay:"auto",onChange:function(e,a){return i("amount",a)}}),r.a.createElement(C.a,{id:"vertical-slider",gutterBottom:!0},"Orbit"),r.a.createElement(z.a,{name:"orbit",label:"Orbit",min:-100,orientation:"vertical",value:l.orbit,valueLabelDisplay:"auto",onChange:function(e,a){return i("orbit",a)}}),r.a.createElement(C.a,{id:"vertical-slider",gutterBottom:!0},"Spin"),r.a.createElement(z.a,{name:"spin",label:"Spin",min:-100,orientation:"vertical",value:l.spin,valueLabelDisplay:"auto",onChange:function(e,a){return i("spin",a)}})),r.a.createElement("div",{className:"toolbox3"},r.a.createElement(C.a,{id:"slider",gutterBottom:!0},"Stroke Color"),r.a.createElement(Z,{name:"stroke",valueLabelDisplay:"auto",value:l.stroke[0],min:0,max:255,"aria-label":"Stroke",onChange:function(e,a){return o(0,"stroke",a)}}),r.a.createElement($,{name:"stroke",label:"Stroke",valueLabelDisplay:"auto",value:l.stroke[1],min:0,max:255,onChange:function(e,a){return o(1,"stroke",a)}}),r.a.createElement(K,{name:"stroke",label:"Stroke",valueLabelDisplay:"auto",value:l.stroke[2],min:0,max:255,onChange:function(e,a){return o(2,"stroke",a)}}))),r.a.createElement(X.a,null))})),ee=Object(Y.a)({root:{color:"red"},thumb:{color:"red"}})(z.a),ae=Object(Y.a)({root:{color:"green"},thumb:{color:"green"}})(z.a),te=Object(Y.a)({root:{color:"blue"},thumb:{color:"blue"}})(z.a),ne=Object(d.b)((function(e){return{canvas:e.canvas}}))((function(e){var a=Object(n.useState)(Object(g.a)(e.canvas.background.split(",").map((function(e){return parseInt(e)})))),t=Object(V.a)(a,2),l=t[0],c=t[1],i=Object(n.useState)([e.canvas.bass_mapping_1,e.canvas.bass_mapping_2]),o=Object(V.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)([e.canvas.mid_mapping_1,e.canvas.mid_mapping_2]),d=Object(V.a)(m,2),p=d[0],h=d[1],v=Object(n.useState)([e.canvas.treble_mapping_1,e.canvas.treble_mapping_2]),E=Object(V.a)(v,2),O=E[0],_=E[1],S=function(e,a){c([].concat(Object(g.a)(l.slice(0,e)),[a],Object(g.a)(l.slice(e+1))))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"canvas-settings"},r.a.createElement(F.a,{onClick:function(){fetch("".concat(b,"/pictures/").concat(e.canvas.id),{method:"PATCH",headers:f,body:JSON.stringify({picture:{background:l.join(","),bass_mapping_1:s[0],bass_mapping_2:s[1],mid_mapping_1:p[0],mid_mapping_2:p[1],treble_mapping_1:O[0],treble_mapping_2:O[1]}})}).then((function(e){return e.json()})).then((function(e){}))}},"Save Canvas"),r.a.createElement("h3",null,"Background Color"),r.a.createElement(ee,{value:l[0],min:0,max:255,lable:"Red",valueLabelDisplay:"auto",onChange:function(e,a){return S(0,a)}}),r.a.createElement(ae,{value:l[1],min:0,max:255,valueLabelDisplay:"auto",label:"Green",onChange:function(e,a){return S(1,a)}}),r.a.createElement(te,{value:l[2],min:0,max:255,valueLabelDisplay:"auto",label:"Blue",onChange:function(e,a){return S(2,a)}})),r.a.createElement("div",{className:"canvas-settings"},r.a.createElement("h3",null,"Frequencies "),r.a.createElement(C.a,{id:"vertical-slider",gutterBottom:!0},"Bass Mapping"),r.a.createElement(z.a,{name:"bass",value:s,max:300,label:"bass",valueLabelDisplay:"auto",onChange:function(e,a){return u(a)}}),r.a.createElement(C.a,{id:"vertical-slider",gutterBottom:!0},"Mid Mapping"),r.a.createElement(z.a,{name:"mid",value:p,label:"mid",max:300,valueLabelDisplay:"auto",onChange:function(e,a){return h(a)}}),r.a.createElement(C.a,{id:"vertical-slider",gutterBottom:!0},"Treble Mapping"),r.a.createElement(z.a,{name:"treble",value:O,label:"treble",max:300,valueLabelDisplay:"auto",onChange:function(e,a){return _(a)}})),r.a.createElement(X.a,null))})),re=Object(d.b)((function(e){return{canvas_id:e.canvas.id,myBursts:e.myBursts,myShapes:e.myShapes,selected:e.selected}}))((function(e){var a=function(a){fetch("".concat(b,"/").concat(a,"s"),{method:"POST",headers:f,body:JSON.stringify(Object(p.a)({},"".concat(a),{user_id:localStorage.id,picture_id:e.canvas_id}))}).then((function(e){return e.json()})).then((function(t){"animate_mo"==a?e.dispatch({type:"HTTP_NEW_BURST",animation:t}):e.dispatch({type:"HTTP_NEW_SHAPE",animation:t})}))};return r.a.createElement(r.a.Fragment,null,function(){switch(e.selected){case"shapes":return r.a.createElement("div",{className:"tools-container"},r.a.createElement(F.a,{onClick:function(){return a("p5_shape")}},"Create New Shape"),e.myShapes?e.myShapes.map((function(e){return r.a.createElement(Q,{shape:e})})):null);case"bursts":return r.a.createElement("div",{className:"tools-container"},r.a.createElement(F.a,{onClick:function(){return a("animate_mo")}},"Create New Burst"),e.myBursts?e.myBursts.map((function(e){return r.a.createElement(G,{animation:e})})):null);case"paint":return r.a.createElement(U,null);case"settings":return r.a.createElement("div",{className:"tools-container"},r.a.createElement(ne,null));default:return r.a.createElement(r.a.Fragment,null)}}())})),le=Object(d.b)((function(e){return{canvas:e.canvas,admin:e.admin}}))((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"canvas-container",className:"canvas-container"},r.a.createElement(M,{paramsId:e.paramsId}),r.a.createElement(re,null)))})),ce=t(505),ie=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).handleSaveCanvas=function(){fetch("".concat(b,"/users/").concat(localStorage.id,"/bookmarks"),{method:"POST",headers:f,body:JSON.stringify({bookmark:{user_id:localStorage.id,picture_id:t.props.canvas.id}})})},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b,"/pictures/").concat(this.props.match.params.id)).then((function(e){return e.json()})).then((function(a){e.props.dispatch({type:"LOAD_CANVAS",canvas:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"canvas-show"},r.a.createElement("div",{className:"canvas-header"},r.a.createElement("h2",null,this.props.canvas.title),localStorage.id&&!this.props.admin?r.a.createElement(F.a,{onClick:this.handleSaveCanvas},"Bookmark Canvas"):null,localStorage.id?r.a.createElement(ce.a,null,r.a.createElement(F.a,{onClick:function(){return e.props.dispatch({type:"SELECT_ANIMATION",animation:"shapes"})}},"Shapes"),r.a.createElement(F.a,{onClick:function(){return e.props.dispatch({type:"SELECT_ANIMATION",animation:"bursts"})}},"Bursts"),localStorage.id==this.props.admin?r.a.createElement(F.a,{onClick:function(){return e.props.dispatch({type:"SELECT_ANIMATION",animation:"settings"})}},"Settings"):""):""),r.a.createElement(le,{paramsId:this.props.match.params.id}))}}]),a}(r.a.Component),oe=Object(d.b)((function(e){return{canvas:e.canvas,admin:e.admin}}))(ie),se=t(74),ue=t(509),me=t(100),de=t(506),pe=t(512),he=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).handleOnSignupChange=function(e){e.persist(),t.setState((function(a){return{signup:Object(h.a)({},a.signup,Object(p.a)({},e.target.id,e.target.value))}}))},t.handleLoginClick=function(){t.props.handleOnLogin(t.state.login)},t.handleSignupClick=function(){t.props.handleOnSignup(t.state.signup)},t.handleOnLoginChange=function(e){t.setState({login:{email:e.target.value}})},t.state={login:{email:""},signup:{email:"",name:""}},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(ue.a,{open:this.props.modal,size:"small"},r.a.createElement(ue.a.Header,null,r.a.createElement(me.a,{name:"times",onClick:this.props.toggleModal}),"Log in/Sign up"),r.a.createElement(ue.a.Content,{image:!0},r.a.createElement(ue.a.Description,null,r.a.createElement(v.a,{onChange:this.handleOnLoginChange,key:"login"},r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{placeholder:"Email",id:"email"})),r.a.createElement(v.a.Button,{onClick:this.handleLoginClick,className:"login",fluid:!0,color:"green"},"Login")),r.a.createElement(de.a,{horizontal:!0},"Or"),r.a.createElement(pe.a,null,"Sign Up"),r.a.createElement(v.a,{onChange:this.handleOnSignupChange,key:"signup"},r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{placeholder:"Name",id:"name"})),r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{placeholder:"Email",id:"email"})),r.a.createElement(v.a.Button,{className:"login",onClick:this.handleSignupClick,fluid:!0,color:"yellow"},"Sign Up")))))}}]),a}(r.a.Component),ge=(t(457),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"banner-img"},r.a.createElement("div",{className:"banner-text"},r.a.createElement("h1",null,"Virtual Canvas"))))}),ve=t(273),Ee=t.n(ve),be=function(){return r.a.createElement("div",{className:"about-container"},r.a.createElement("div",{className:"left"},r.a.createElement("img",{src:Ee.a,alt:"lights"})),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"text"},r.a.createElement("h2",null,"SHARED CANVASES ",r.a.createElement("br",null),r.a.createElement("span",null,"FOR AUDIO VISUALIZATION")),r.a.createElement("p",null,"Virtual Canvas is an app that lets you and any of your friends jump on the same canvas to create a visualizer together. Shapes, bursts, and canvas settings all render in real time across your screen and anyone else who wants to join. Using the same technology as instant messaging, users create, update, and delete visualizer shapes in a live and creative shared space.")),r.a.createElement("div",{className:"links"},r.a.createElement("button",null,r.a.createElement(k.b,{exact:!0,to:"/canvases"},"Get Started")),r.a.createElement("button",null,r.a.createElement(k.b,{to:""},"Learn More")))))},fe=function(e){var a=Object(n.useState)({data:Object(g.a)(e.canvases.map((function(e){return{title:e.title,creator:e.user?e.user.name:"",id:e.id}})))}),t=Object(V.a)(a,2),l=t[0],c=t[1];return r.a.createElement("div",{className:"canvas-table"},r.a.createElement("h3",null,"Created Canvases"),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Action"),r.a.createElement("th",null,"Title")),l.data.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(F.a,{onClick:function(){return a=e.id,void fetch("".concat(b,"/pictures/").concat(a),{method:"DELETE",headers:f}).then((function(e){return e.json()})).then((function(e){"Successful"===e.message&&c((function(e){return{data:Object(g.a)(e.data.filter((function(e){return e.id!==a})))}}))}));var a}},"Delete")),r.a.createElement("td",null,e.title))}))))},Oe=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).state={user:{}},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b,"/users/").concat(localStorage.id)).then((function(e){return e.json()})).then((function(a){console.log(a),e.setState({user:a})}))}},{key:"render",value:function(){var e=this.state.user,a=e.name,t=e.email,n=e.bookmarks,l=e.pictures,c=n?n.map((function(e){return e.picture})):[];return console.log(c),r.a.createElement("div",{className:"user-show"},r.a.createElement("h2",null,"Account overview"),r.a.createElement("h3",null,"Email: ",t),r.a.createElement("h3",null,"Name: ",a),r.a.createElement("div",{className:"user-canvases-container"},l?r.a.createElement(fe,{title:"Created Canvases",canvases:l,deletePath:"".concat(b,"/pictures/")}):""))}}]),a}(r.a.Component),_e=function(e){return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",{className:"nav-links"},r.a.createElement("li",null,r.a.createElement(k.c,{exact:!0,to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(k.c,{exact:!0,to:"/canvases"},"Canvases")),r.a.createElement("li",null,"|"),e.loggedin?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(k.c,{exact:!0,to:"/"},r.a.createElement("button",{onClick:e.handleLogout},"Log out"))),r.a.createElement("li",null,r.a.createElement(k.c,{exact:!0,to:"/user"},"Profile"))):r.a.createElement("button",{onClick:function(){return e.toggleModal()}},"Log in"))))},Se=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={loggedin:!!localStorage.id,modal:!1},t.toggleModal=function(){t.setState({modal:!t.state.modal})},t.handleLogout=function(){t.setState({loggedin:!1},(function(){return localStorage.clear()}))},t.handleUserFetch=function(e){return function(a){t.fetchUser("".concat(b,"/").concat(e),a)}},t.fetchUser=function(e,a){return fetch(e,{method:"POST",headers:f,body:JSON.stringify(a)}).then((function(e){return e.json()})).then(t.loginCallBack)},t.loginCallBack=function(e){e.error?console.log(e):t.setState({loggedin:!0,modal:!1},(function(){localStorage.setItem("id",e.id),localStorage.setItem("email",e.email)}))},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.props;e.user,e.signOut,e.signInWithGoogle;return r.a.createElement(k.a,null,r.a.createElement(he,{modal:this.state.modal,handleOnLogin:this.handleUserFetch("users/login"),handleOnSignup:this.handleUserFetch("users"),toggleModal:this.toggleModal}),r.a.createElement(_e,{loggedin:this.state.loggedin,toggleModal:this.toggleModal,handleLogout:this.handleLogout}),r.a.createElement(se.b,{exact:!0,path:"/",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,null),r.a.createElement(be,null))}}),r.a.createElement(se.b,{path:"/user"},this.state.loggedin?r.a.createElement(Oe,null):r.a.createElement(se.a,{to:"/"})),r.a.createElement(se.b,{exact:!0,path:"/canvases",render:function(){return r.a.createElement(T,null)}}),r.a.createElement(se.b,{exact:!0,path:"/canvases/:id",render:function(e){return r.a.createElement(oe,e)}}))}}]),a}(r.a.Component),Ce=Object(d.b)()(Se);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var je=t(136),ye={user_id:"",canvas:{},canvasBursts:[],myBursts:[],canvasShapes:[],myShapes:[],selected:"",admin:""};var ke=Object(je.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOAD_CANVAS":return Object(h.a)({},e,{canvas:a.canvas,canvasBursts:a.canvas.animate_mos,canvasShapes:a.canvas.p5_shapes,myBursts:a.canvas.animate_mos.filter((function(e){return e.user_id==localStorage.id})),myShapes:a.canvas.p5_shapes.filter((function(e){return e.user_id==localStorage.id})),admin:a.canvas.user.id});case"PATCH_CANVAS":return Object(h.a)({},e,{canvas:a.canvas.picture});case"HTTP_NEW_BURST":return Object(h.a)({},e,{myBursts:[].concat(Object(g.a)(e.myBursts),[a.animation])});case"HTTP_EDIT_BURST":var t=e.myBursts.map((function(e){return e.id===a.animation.id?a.animation:e}));return Object(h.a)({},e,{myBursts:Object(g.a)(t)});case"HTTP_DELETE_BURST":return Object(h.a)({},e,{myBursts:e.myBursts.filter((function(e){return e.id!==a.animation_id}))});case"HTTP_NEW_SHAPE":return Object(h.a)({},e,{myShapes:[].concat(Object(g.a)(e.myShapes),[a.animation])});case"HTTP_EDIT_SHAPE":var n=e.myShapes.map((function(e){return e.id===a.animation.id?a.animation:e}));return Object(h.a)({},e,{myShapes:Object(g.a)(n)});case"HTTP_DELETE_SHAPE":return Object(h.a)({},e,{myShapes:Object(g.a)(e.myShapes.filter((function(e){return e.id!==a.animation_id})))});case"CHANNEL_POST_SHAPE":return Object(h.a)({},e,{canvasShapes:[].concat(Object(g.a)(e.canvasShapes),[a.animation.p5_shape])});case"CHANNEL_PATCH_SHAPE":var r=e.canvasShapes.map((function(e){return e.id===a.animation.p5_shape.id?a.animation.p5_shape:e}));return Object(h.a)({},e,{canvasShapes:Object(g.a)(r)});case"CHANNEL_DELETE_SHAPE":return Object(h.a)({},e,{canvasShapes:Object(g.a)(e.canvasShapes.filter((function(e){return e.id!==a.animation_id})))});case"CHANNEL_POST_BURST":return Object(h.a)({},e,{canvasBursts:[].concat(Object(g.a)(e.canvasBursts),[a.animation.animate_mo])});case"CHANNEL_PATCH_BURST":var l=e.canvasBursts.map((function(e){return e.id===a.animation.animate_mo.id?a.animation.animate_mo:e}));return Object(h.a)({},e,{canvasBursts:Object(g.a)(l)});case"CHANNEL_DELETE_BURST":return Object(h.a)({},e,{canvasBursts:Object(g.a)(e.canvasBursts.filter((function(e){return e.id!==a.animation_id})))});case"SELECT_ANIMATION":return Object(h.a)({},e,{selected:a.animation});case"REMOVE_CANVAS":return{canvas:{},myAnimations:[],canvasAnimations:[],selected:"",admin:""};default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(d.a,{store:ke},r.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[293,1,2]]]);
//# sourceMappingURL=main.f67f7a49.chunk.js.map